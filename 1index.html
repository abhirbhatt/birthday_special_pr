<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specially For U - Magic Portal</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Google Fonts -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&display=swap">
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Confetti fallback -->
    <script>
        if (!window.confetti) {
            document.write('<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"><\/script>');
        }
    </script>
    <!-- Lottie animation loader -->
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js" type="module"></script>
    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
</head>

<body onload="document.querySelector('.main').style.opacity='1'">
    <div class="main">
        <!-- Background particles -->
        <div class="bg-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>

        <div id="wrapper">
            <!-- Enhanced Password Screen -->
            <div id="password-screen" role="dialog" aria-labelledby="password-title">
                <!-- Floating hearts -->
                <div class="floating-hearts">
                    <div class="heart">ğŸ’–</div>
                    <div class="heart">ğŸ’</div>
                    <div class="heart">ğŸˆ</div>
                    <div class="heart">ğŸŒŸ</div>
                    <div class="heart">âœ¨</div>
                    <div class="heart">ğŸ€</div>
                    <div class="heart">ğŸŒ¸</div>
                    <div class="heart">ğŸ¦„</div>
                    <div class="heart">ğŸ’•</div>
                    <div class="heart">ğŸŒ™</div>
                </div>

                <div id="password-box">
                    <!-- Enhanced sparkles -->
                    <div class="sparkle sparkle-1">âœ¨</div>
                    <div class="sparkle sparkle-2">â­</div>
                    <div class="sparkle sparkle-3">ğŸ’«</div>
                    <div class="sparkle sparkle-4">ğŸŒŸ</div>
                    <div class="sparkle sparkle-5">ğŸ’</div>
                    <div class="sparkle sparkle-6">ğŸ”®</div>

                    <div class="password-header">
                        <div class="crown">ğŸ‘‘</div>
                        <h2 id="password-title" class="password-title">Name likho gdhi</h2>
                        <p class="subtitle-text">âœ¨ Surprise aage hai tumara âœ¨</p>
                    </div>

                    <div class="input-container">
                        <label for="pagePassword" class="sr-only">Name likho gdhi</label>
                        <input type="text" id="pagePassword" class="magical-input"
                            placeholder="Type your beautiful name, princess..." aria-describedby="error-message"
                            maxlength="50" autocomplete="off" />
                        <div class="input-glow"></div>
                    </div>

                    <button class="unlock-btn" onclick="checkPassword()" aria-label="Unlock the magical portal">
                        <span class="btn-text">ğŸ”“ Unlock My Magic World</span>
                        <div class="btn-sparkle"></div>
                    </button>

                    <div id="error-message" class="message error-msg" role="alert">
                        <span class="msg-icon">ğŸ’”</span>
                        <span>That's not the right magical name, sweetie!</span>
                    </div>

                    <div id="attempts-message" class="message attempts-msg" role="alert"></div>

                    <!-- Progress indicator -->
                    <div class="progress-dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </div>

            <!-- Transition Layer -->
            <div class="transition-layer" id="transition-layer">
                <dotlottie-wc class="unicorn-lottie"
                    src="https://lottie.host/4286cc33-1611-4564-8792-bf1a6f221491/M9bTWpz8mG.lottie" autoplay loop
                    speed="1" onerror="this.style.display='none'" aria-label="Transition animation">
                </dotlottie-wc>
            </div>

            <!-- Main Content -->
            <div id="main-content" style="display: none">
                <!-- Theme Toggle -->
                <div class="theme-toggle">
                    <button onclick="toggleTheme()" aria-label="Toggle light/dark theme">ğŸŒ™ Toggle Theme</button>
                </div>

                <!-- Header Section -->
                <div class="header-section scroll-section">
                    <div class="header">
                        <h1>ğŸ‰ <span data-i18n="happy_birthday">Happy Birthday!</span> ğŸ‰</h1>
                        <div class="subtitle" data-i18n="specially_for_u">Specially For U ğŸ’–</div>
                    </div>
                </div>

                <!-- MAIN QUESTION SECTION -->
                <div class="question-section scroll-section" id="main-question-section">
                    <div class="question-container">
                        <div class="question-header">
                            <div class="question-icon">ğŸ’•</div>
                            <h2 class="question-title">Do you like me? ğŸ˜Š</h2>
                            <p class="question-text">Be honest with your heart... ğŸ’–</p>
                        </div>

                        <div class="question-buttons">
                            <button class="btn-yes" onclick="handleMainQuestionAnswer('yes')">
                                <span class="btn-emoji">ğŸ˜</span>
                                <span class="btn-label">Yes, I do! ğŸ’•</span>
                            </button>
                            <button class="btn-no" onclick="handleMainQuestionAnswer('no')">
                                <span class="btn-emoji">ğŸ˜”</span>
                                <span class="btn-label">No, sorry...</span>
                            </button>
                        </div>

                        <div id="main-question-response" class="question-response">
                            <p id="main-response-text"></p>
                        </div>
                    </div>
                </div>

                <!-- Hidden sections message -->
                <div class="hidden-message" id="hidden-message">
                    <div class="hidden-message-container">
                        <div class="message-icon">ğŸ”’</div>
                        <h3>Choose one option first! ğŸ’–</h3>
                        <p>Please answer the question above to unlock all the surprises waiting for you! âœ¨</p>
                    </div>
                </div>

                <!-- Countdown Section (Initially Hidden) -->
                <div class="countdown-section scroll-section hidden-content" id="countdown-section">
                    <div class="countdown" id="countdown" role="timer">
                        <h2>â° Countdown to Your Special Day â°</h2>
                        <div class="countdown-container">
                            <div class="time-box weeks">
                                <h2 id="weeks-number">0</h2>
                                <p>Weeks</p>
                            </div>
                            <div class="time-box days">
                                <h2 id="days-number">0</h2>
                                <p>Days</p>
                            </div>
                            <div class="time-box hours">
                                <h2 id="hours-number">0</h2>
                                <p>Hours</p>
                            </div>
                            <div class="time-box minutes">
                                <h2 id="minutes-number">0</h2>
                                <p>Minutes</p>
                            </div>
                            <div class="time-box seconds">
                                <h2 id="seconds-number">0</h2>
                                <p>Seconds</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NEW CONTENT BUTTONS SECTION -->
                <div class="content-buttons-section scroll-section hidden-content" id="content-buttons-section">
                    <div class="content-buttons">
                        <button class="content-btn pics-btn" onclick="showContentSection('pics')">
                            <span class="btn-emoji">ğŸ“¸</span>
                            <span class="btn-label">Pics</span>
                        </button>
                        <button class="content-btn shayari-btn" onclick="showContentSection('shayari')">
                            <span class="btn-emoji">ğŸ’</span>
                            <span class="btn-label">Shayari For U</span>
                        </button>
                        <button class="content-btn letter-btn" onclick="showContentSection('letter')">
                            <span class="btn-emoji">ğŸ’Œ</span>
                            <span class="btn-label">Letter For U</span>
                        </button>
                    </div>
                </div>

                <!-- PICS SECTION -->
                <div class="pics-section content-section hidden-content" id="pics-section">
                    <div class="section-header">
                        <h2>ğŸ“¸ Beautiful Memories ğŸ“¸</h2>
                        <p>Our precious moments together... ğŸ’•</p>
                    </div>
                    <div class="pics-gallery">
                        <div class="pic-item">
                            <img src="https://picsum.photos/200/200?random=1" alt="Memory 1"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">Beautiful moment 1 ğŸ’–</div>
                        </div>
                        <div class="pic-item">
                            <img src="https://picsum.photos/200/200?random=2" alt="Memory 2"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">Sweet memory 2 ğŸŒ¸</div>
                        </div>
                        <div class="pic-item">
                            <img src="https://picsum.photos/200/200?random=3" alt="Memory 3"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">Happy times 3 âœ¨</div>
                        </div>
                        <div class="pic-item">
                            <img src="https://picsum.photos/200/200?random=4" alt="Memory 4"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">Precious moment 4 ğŸ’•</div>
                        </div>
                        <div class="pic-item">
                            <img src="https://picsum.photos/200/200?random=5" alt="Memory 5"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">Forever memory 5 ğŸŒŸ</div>
                        </div>
                        <div class="pic-item">
                            <img src="https://picsum.photos/200/200?random=6" alt="Memory 6"
                                onclick="openLightbox(this.src, this.alt)" />
                            <div class="pic-caption">Lovely moment 6 ğŸ’–</div>
                        </div>
                    </div>
                </div>
                <!-- SHAYARI SECTION -->
                <div class="shayari-section content-section hidden-content" id="shayari-section">
                    <div class="section-header">
                        <h2>ğŸ’ Shayari For You ğŸ’</h2>
                        <p>Words from my heart... ğŸ’–</p>
                    </div>
                    <div class="shayari-container">
                        <div class="shayari-card">
                            <div class="shayari-text">
                                "Tumhari muskaan se roshan hai mera jahan, ğŸ’«<br>
                                Tum ho toh zindagi mein hai khushiyon ka samaan! ğŸŒ¸<br>
                                Happy Birthday meri jaan! ğŸ’•"
                            </div>
                        </div>
                        <div class="shayari-card">
                            <div class="shayari-text">
                                "Chandni raat ho ya suraj ki roshni, â˜€ï¸<br>
                                Tumhare bina adhuri lagti hai zindagi! ğŸŒ™<br>
                                Janamdin ki dher saari badhai! ğŸ‰"
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LETTER SECTION -->
                <div class="letter-section content-section hidden-content" id="letter-section">
                    <div class="section-header">
                        <h2>ğŸ’Œ A Letter For You ğŸ’Œ</h2>
                        <p>From my heart to yours... ğŸ’–</p>
                    </div>
                    <div class="letter-container">
                        <div class="letter-paper">
                            <div class="letter-header">
                                <h3>My Dearest Love ğŸ’•</h3>
                                <div class="letter-date">On your special day...</div>
                            </div>
                            <div class="letter-content">
                                <p>Meri pyari si jaan, ğŸ’–</p>

                                <p>Aaj tumhara janamdin hai aur main kitna khush hun! ğŸ‰ Tumhari zindagi mein aane ke
                                    baad se meri duniya hi badal gayi hai. Tumhari muskaan dekh kar mera dil khush ho
                                    jata hai, tumhari hansee sun kar lagta hai jaise koi angel has rahi ho! ğŸ˜‡</p>

                                <p>Tumhare saath bitaye har pal ko main treasure ki tarah sambhal kar rakha hun apne dil
                                    mein. ğŸ’ Tumhare pyaar ne mujhe ek behtar insaan banaya hai. Tumhari har baat,
                                    tumhara har andaaz, tumhara pyaar se mujhe dekh na - sab kuch perfect hai! âœ¨</p>

                                <p>Is special din par main tumse promise karta hun ki hamesha tumhara saath dunga, tumhe
                                    khush rakhunga, aur har din tumhe ehsaas karunga ki tum kitni special ho! ğŸ’•</p>

                                <p>Happy Birthday meri jaan! ğŸ‚ May all your dreams come true and may our love grow
                                    stronger with each passing day! ğŸŒŸ</p>

                                <div class="letter-footer">
                                    <p>With all my love and warm hugs, ğŸ¤—<br />
                                        <strong>Your loving partner ğŸ’–</strong>
                                    </p>

                                    <div class="letter-signature">
                                        <div class="heart-signature">ğŸ’• Forever Yours ğŸ’•</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="redirect-button">
                    <span class="redirect-emoji">ğŸ¯</span>
                    <span class="redirect-text">Go to Surprises!</span>
                    <span class="redirect-arrow">â†“</span>
                </button>

                <!-- Lightbox for images -->
                <div id="lightbox" class="lightbox" role="dialog" aria-label="Image lightbox">
                    <span class="close-lightbox" onclick="closeLightbox()" aria-label="Close lightbox">&times;</span>
                    <img id="lightbox-img" src="" alt="" />
                </div>
            </div>
        </div>

        <!-- JavaScript -->
        <script>
            // Force page to start at top on every load/refresh
            window.addEventListener('beforeunload', function () {
                window.scrollTo(0, 0);
            });

            window.addEventListener('load', function () {
                setTimeout(() => {
                    window.scrollTo(0, 0);
                    document.documentElement.scrollTop = 0;
                    document.body.scrollTop = 0;
                }, 50);
            });

            // Prevent scroll restoration
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }

            let attemptCount = 0;
            const maxAttempts = 5;
            let isLottiePaused = false;
            const audio = document.getElementById('backgroundMusic');
            const validNames = ['ab', 'alice', 'bob', 'bestie', 'princess', 'angel', 'queen'];
            let currentLang = 'en';
            let currentTheme = localStorage.getItem('theme') || 'light';
            let mainQuestionAnswered = false;

            // Enhanced password check with magical effects
            function checkPassword() {
                const pass = document.getElementById('pagePassword').value.trim().toLowerCase();
                const errorMessage = document.getElementById('error-message');
                const attemptsMessage = document.getElementById('attempts-message');
                const passwordScreen = document.getElementById('password-screen');
                const mainContent = document.getElementById('main-content');
                const transitionLayer = document.getElementById('transition-layer');
                const passwordBox = document.getElementById('password-box');

                // Remove previous animations
                passwordBox.classList.remove('shake', 'success');

                if (pass.length < 2) {
                    showError("Please enter your magical name first! ğŸŒŸ", passwordBox);
                    return;
                }

                attemptCount++;

                if (attemptCount >= maxAttempts) {
                    showError("Too many attempts! The magic portal is temporarily closed. ğŸ”’", passwordBox);
                    document.getElementById('pagePassword').disabled = true;
                    document.querySelector('.unlock-btn').disabled = true;
                    document.querySelector('.unlock-btn').innerHTML = '<span class="btn-text">ğŸ”’ Portal Locked</span>';
                    passwordBox.classList.add('locked');
                    return;
                }

                if (validNames.includes(pass)) {
                    // Success - magical entrance
                    errorMessage.style.display = 'none';
                    attemptsMessage.style.display = 'none';
                    passwordBox.classList.add('success');

                    // Success feedback
                    document.querySelector('.unlock-btn .btn-text').textContent = 'âœ… Welcome to Paradise!';
                    document.querySelector('.unlock-btn').style.background = 'linear-gradient(135deg, #10ac84, #00d2d3)';

                    // Create magical confetti effect
                    createMagicalEffect();

                    // Transition sequence
                    setTimeout(() => { transitionLayer.classList.add('active'); }, 400);
                    setTimeout(() => { passwordScreen.classList.add('fade-out'); }, 1600);
                    setTimeout(() => {
                        passwordScreen.style.display = 'none';
                        mainContent.style.display = 'block';
                        transitionLayer.classList.remove('active');

                        // Start your existing functionality
                        updateCountdown();
                        setInterval(updateCountdown, 1000); // Start countdown timer
                        initScrollMagic();
                        initAOS();
                        trackEvent('Magic Portal Unlocked');
                    }, 2700);

                } else {
                    showError("That's not your magical name, try again! ğŸ’«", passwordBox);
                    attemptsMessage.innerHTML = `<span class="msg-icon">âš ï¸</span> ${maxAttempts - attemptCount} magical attempts remaining`;
                    attemptsMessage.style.display = 'block';
                    attemptsMessage.style.opacity = '1';

                    passwordBox.classList.add('shake');
                    setTimeout(() => {
                        passwordBox.classList.remove('shake');
                    }, 600);
                }
            }

            // MAIN QUESTION FUNCTIONALITY
            function handleMainQuestionAnswer(answer) {
                const responseDiv = document.getElementById('main-question-response');
                const responseText = document.getElementById('main-response-text');
                const buttons = document.querySelectorAll('#main-question-section .question-buttons button');
                const hiddenMessage = document.getElementById('hidden-message');

                // Disable buttons to prevent multiple clicks
                buttons.forEach(btn => btn.disabled = true);
                mainQuestionAnswered = true;

                if (answer === 'yes') {
                    responseText.innerHTML = "ğŸ‰ Yay! I'm so happy! Let's celebrate your special day! ğŸ’•âœ¨";
                    responseDiv.style.display = 'block';

                    // Fire confetti and show all sections
                    setTimeout(() => {
                        // Massive confetti celebration
                        if (window.confetti) {
                            // Multiple confetti bursts
                            for (let i = 0; i < 5; i++) {
                                setTimeout(() => {
                                    confetti({
                                        particleCount: 200,
                                        spread: 120,
                                        origin: { y: Math.random() * 0.4 + 0.3 },
                                        colors: ['#ff69b4', '#66ccff', '#ffc1e3', '#c5dfff', '#ff9a9e', '#fecfef', '#a8edea']
                                    });
                                }, i * 200);
                            }
                        }

                        // Show all hidden sections
                        revealAllSections();
                    }, 800);
                } else {
                    responseText.innerHTML = "ğŸ˜ Mujhe pata tha! Aaj birthday hai toh surprise toh dena banta hai aapko! ğŸ‚ğŸ‰ğŸ’–";
                    responseDiv.style.display = 'block';

                    // Show all sections after a delay
                    setTimeout(() => {
                        revealAllSections();
                    }, 1500);
                }

                // Hide the "choose option" message
                hiddenMessage.style.display = 'none';
            }

            function revealAllSections() {
                console.log('ğŸ¯ Starting to reveal all sections...');
                const hiddenSections = document.querySelectorAll('.hidden-content');
                console.log('ğŸ“Š Found hidden sections:', hiddenSections.length);

                hiddenSections.forEach((section, index) => {
                    console.log(`ğŸ”„ Processing section ${index + 1}:`, section.id);
                    setTimeout(() => {
                        console.log(`âœ… Revealing section:`, section.id);
                        section.classList.remove('hidden-content');
                        section.classList.add('reveal-content');
                        section.style.display = 'block'; // Force display

                        // Special handling for countdown section
                        if (section.id === 'countdown-section') {
                            console.log('â° Special handling for countdown section');
                            setTimeout(() => {
                                document.querySelectorAll('.time-box').forEach(box => {
                                    box.classList.add('animate');
                                });
                            }, 300);
                        }

                        // Special handling for content buttons section
                        if (section.id === 'content-buttons-section') {
                            console.log('ğŸ”˜ Special handling for content buttons section');
                            setTimeout(() => {
                                document.querySelectorAll('.content-btn').forEach(btn => {
                                    btn.classList.add('animate');
                                });
                            }, 300);
                        }
                    }, index * 500);
                });

                // Fire side confetti
                setTimeout(() => {
                    fireSideConfetti();
                }, 1000);
            }

            // CONTENT SECTIONS FUNCTIONALITY
            // CONTENT SECTIONS FUNCTIONALITY - FIXED VERSION
            function showContentSection(sectionType) {
                // DON'T hide sections anymore - just show the clicked one if it's hidden
                const targetSection = document.getElementById(`${sectionType}-section`);

                // Only show if it's currently hidden
                if (targetSection.style.display === 'none' || !targetSection.classList.contains('active-content')) {
                    targetSection.style.display = 'block';

                    // Force reflow
                    targetSection.offsetHeight;

                    // Add animation class
                    targetSection.classList.add('active-content');

                    // NEW CODE: Show redirect button only when "pics" is clicked
                    if (sectionType === 'pics') {
                        const redirectButton = document.getElementById('redirect-button');
                        if (redirectButton) {
                            setTimeout(() => {
                                redirectButton.classList.add('show');
                            }, 500); // Show after 500ms delay
                        }
                    }

                    // Smooth scroll to section
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });

                    // Fire confetti after animation
                    setTimeout(() => {
                        fireSideConfetti();

                        // Add special animations based on section type
                        if (sectionType === 'pics') {
                            document.querySelectorAll('.pic-item').forEach((item, index) => {
                                setTimeout(() => {
                                    item.classList.add('animate');
                                }, index * 100);
                            });
                        } else if (sectionType === 'shayari') {
                            document.querySelectorAll('.shayari-card').forEach((card, index) => {
                                setTimeout(() => {
                                    card.classList.add('animate');
                                }, index * 200);
                            });
                        } else if (sectionType === 'letter') {
                            document.querySelector('.letter-paper').classList.add('animate');
                        }
                    }, 600);

                    trackEvent(`Content Section Viewed: ${sectionType}`);
                } else {
                    // If section is already visible, just scroll to it
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }

            function showError(message, passwordBox) {
                const errorMessage = document.getElementById('error-message');
                const messageSpan = errorMessage.querySelector('span:last-child');
                if (messageSpan) {
                    messageSpan.textContent = message;
                }

                errorMessage.style.display = 'block';
                errorMessage.style.opacity = '1';
                passwordBox.classList.add('shake');

                setTimeout(() => {
                    errorMessage.style.opacity = '0';
                    passwordBox.classList.remove('shake');
                }, 3000);
            }

            function createMagicalEffect() {
                // Enhanced confetti with multiple bursts
                if (window.confetti) {
                    for (let i = 0; i < 3; i++) {
                        setTimeout(() => {
                            confetti({
                                particleCount: 150,
                                spread: 120,
                                origin: { y: Math.random() * 0.4 + 0.3 },
                                colors: ['#ff9a9e', '#fecfef', '#a8edea', '#89f7fe', '#66a6ff']
                            });
                        }, i * 300);
                    }
                }

                // Create sparkle explosion
                for (let i = 0; i < 20; i++) {
                    createSparkle();
                }
            }

            function createSparkle() {
                const sparkle = document.createElement('div');
                sparkle.innerHTML = ['âœ¨', 'â­', 'ğŸ’«', 'ğŸŒŸ', 'ğŸ’'][Math.floor(Math.random() * 5)];
                sparkle.style.position = 'fixed';
                sparkle.style.fontSize = Math.random() * 20 + 15 + 'px';
                sparkle.style.left = Math.random() * window.innerWidth + 'px';
                sparkle.style.top = Math.random() * window.innerHeight + 'px';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.zIndex = '9999';
                sparkle.style.animation = 'sparkleFloat 2s ease-out forwards';

                document.body.appendChild(sparkle);

                setTimeout(() => {
                    document.body.removeChild(sparkle);
                }, 2000);
            }

            // Enter key functionality
            document.getElementById('pagePassword').addEventListener('keypress', function (event) {
                if (event.key === 'Enter') {
                    checkPassword();
                }
            });

            // Add sparkle float animation to head
            const style = document.createElement('style');
            style.textContent = `
                @keyframes sparkleFloat {
                    0% { 
                        opacity: 1; 
                        transform: scale(1) rotate(0deg) translateY(0); 
                    }
                    100% { 
                        opacity: 0; 
                        transform: scale(0.3) rotate(360deg) translateY(-100px); 
                    }
                }
            `;
            document.head.appendChild(style);

            // Your existing functions
            const translations = {
                en: {
                    happy_birthday: 'Happy Birthday!',
                    specially_for_u: 'Specially For U ğŸ’–'
                }
            };

            function initScrollMagic() {
                const headerSection = document.querySelector('.header-section');
                const mainQuestionSection = document.getElementById('main-question-section');

                function handleScroll() {
                    const scrollY = window.scrollY;
                    const windowHeight = window.innerHeight;

                    if (scrollY > windowHeight * 0.2) {
                        headerSection.classList.add('scrolled');
                    } else {
                        headerSection.classList.remove('scrolled');
                    }

                    // Show main question section after header
                    if (scrollY > windowHeight * 0.3 && !mainQuestionSection.classList.contains('animate')) {
                        mainQuestionSection.classList.add('animate');
                    }
                }

                window.addEventListener('scroll', handleScroll);
                handleScroll();
            }

            function initAOS() {
                if (typeof AOS !== 'undefined') {
                    AOS.init({
                        duration: 800,
                        easing: 'ease-in-out',
                        once: true,
                        offset: 100
                    });
                }
            }

            function fireSideConfetti() {
                const colors = currentTheme === 'dark' ? ['#ffffff', '#cccccc', '#999999'] : ['#ff69b4', '#66ccff', '#ffc1e3'];

                if (window.confetti) {
                    confetti({
                        particleCount: 100,
                        angle: 60,
                        spread: 70,
                        origin: { x: 0, y: 0.6 },
                        colors
                    });
                    confetti({
                        particleCount: 100,
                        angle: 120,
                        spread: 70,
                        origin: { x: 1, y: 0.6 },
                        colors
                    });
                }
            }

            const countdown = document.getElementById('countdown');
            const birthdayDate = new Date('August 31, 2025 00:00:00').getTime();

            function updateCountdown() {
                const now = new Date().getTime();
                const gap = birthdayDate - now;

                if (gap <= 0) {
                    document.querySelector('#countdown h2').innerHTML = 'ğŸ‰ It\'s Your Birthday! ğŸ‰';
                    fireSideConfetti();
                    return;
                }

                const second = 1000;
                const minute = second * 60;
                const hour = minute * 60;
                const day = hour * 24;
                const week = day * 7;

                const weeks = Math.floor(gap / week);
                const days = Math.floor((gap % week) / day);
                const hours = Math.floor((gap % day) / hour);
                const minutes = Math.floor((gap % hour) / minute);
                const seconds = Math.floor((gap % minute) / second);

                // Update individual countdown elements
                const weeksEl = document.getElementById('weeks-number');
                const daysEl = document.getElementById('days-number');
                const hoursEl = document.getElementById('hours-number');
                const minutesEl = document.getElementById('minutes-number');
                const secondsEl = document.getElementById('seconds-number');

                if (weeksEl) weeksEl.textContent = weeks;
                if (daysEl) daysEl.textContent = days;
                if (hoursEl) hoursEl.textContent = hours;
                if (minutesEl) minutesEl.textContent = minutes;
                if (secondsEl) secondsEl.textContent = seconds;

                updateLanguage();
            }

            function toggleTheme() {
                currentTheme = currentTheme === 'light' ? 'dark' : 'light';
                document.body.className = currentTheme + '-theme';
                localStorage.setItem('theme', currentTheme);
                fireSideConfetti();
                trackEvent(`Theme Toggled: ${currentTheme}`);
            }

            function openLightbox(src, alt) {
                const lightbox = document.getElementById('lightbox');
                const lightboxImg = document.getElementById('lightbox-img');
                lightboxImg.src = src;
                lightboxImg.alt = alt;
                lightbox.style.display = 'flex';
                trackEvent('Lightbox Opened');
            }

            function closeLightbox() {
                document.getElementById('lightbox').style.display = 'none';
                trackEvent('Lightbox Closed');
            }

            function updateLanguage() {
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (translations[currentLang][key]) {
                        el.innerHTML = translations[currentLang][key];
                    }
                });
            }

            function setLanguage(lang) {
                currentLang = lang;
                updateLanguage();
                localStorage.setItem('language', lang);
                trackEvent(`Language Changed: ${lang}`);
            }

            function trackEvent(eventName) {
                console.log(`Event: ${eventName}`);
            }

            window.addEventListener('load', () => {
                document.body.className = currentTheme + '-theme';
                const savedLang = localStorage.getItem('language') || 'en';
                setLanguage(savedLang);
            });

            document.addEventListener('touchstart', function (e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });

            document.addEventListener('gesturestart', (e) => e.preventDefault());

            document.getElementById('lightbox').addEventListener('click', function (e) {
                if (e.target === this) {
                    closeLightbox();
                }
            });

            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    closeLightbox();
                }
            });
            // Simple Redirect Button Logic (add to your existing script)
            document.addEventListener('DOMContentLoaded', function () {
                const redirectButton = document.getElementById('redirect-button');

                if (redirectButton) {
                    redirectButton.onclick = function () {
                        const buttonsSection = document.getElementById('content-buttons-section');
                        if (buttonsSection) {
                            buttonsSection.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center'
                            });
                        }
                            
                    };
                }
            });

        </script>

    </div>
</body>

</html>